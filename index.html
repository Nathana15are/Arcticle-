<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üêµ MonkeyGames Immersive</title>
<style>
:root{
  --bg:#0a1e0f;
  --card:#123018;
  --accent:#8b5cf6;
  --muted:#c0c0b0;
  --glass: rgba(255,255,255,0.05);
  font-family: 'Segoe UI', Roboto, sans-serif;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{background: linear-gradient(160deg,#0a1e0f,#123018); color:#e6eef8; overflow-x:hidden; position:relative;}
.particles{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0;}
.particle{position:absolute; width:10px; height:10px; background:rgba(139,92,246,0.3); border-radius:50%; animation:fall linear infinite;}
@keyframes fall{0%{transform:translateY(-10px) rotate(0deg);}100%{transform:translateY(110vh) rotate(360deg);}}
.app{position:relative; z-index:1; min-height:100vh; display:flex; flex-direction:column; align-items:center; padding:20px; gap:20px;}
.header{width:100%; max-width:1200px; display:flex; justify-content:space-between; align-items:center;}
.logo{font-size:28px;font-weight:bold; color:var(--accent); text-shadow:0 0 15px var(--accent);}
.subtitle{font-size:12px;color:var(--muted);}
.container{display:flex; flex-direction:column; width:100%; max-width:1200px; gap:20px;}
.panel{background:var(--card); border-radius:12px; padding:16px; box-shadow: 0 8px 20px rgba(0,0,0,0.7); transition:0.3s; transform:translateY(0);}
.panel:hover{transform:translateY(-4px); box-shadow:0 12px 28px rgba(139,92,246,0.6);}
.grid{display:grid; grid-template-columns: repeat(auto-fit,minmax(160px,1fr)); gap:16px;}
.card{background:var(--glass); padding:12px; border-radius:10px; cursor:pointer; transition:0.3s; display:flex; flex-direction:column; gap:6px; border:1px solid rgba(139,92,246,0.2); opacity:0; transform:translateY(15px); animation:fadeInUp 0.6s ease forwards;}
.card:hover{transform:translateY(-6px) rotateZ(1deg); box-shadow:0 12px 28px rgba(139,92,246,0.8); border:1px solid var(--accent);}
.card h3{font-size:16px;}
.card p{font-size:12px;color:var(--muted);}
.card.flash{animation:flashNeon 0.3s;}
@keyframes flashNeon{0%{box-shadow:0 0 8px #8b5cf6; transform:scale(1.02);}50%{box-shadow:0 0 20px #8b5cf6; transform:scale(1.05);}100%{box-shadow:0 0 8px #8b5cf6; transform:scale(1);}}
.btn{padding:8px 12px; border-radius:8px; background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(139,92,246,0.5); color:inherit; cursor:pointer; transition:0.3s;}
.btn:hover{box-shadow:0 0 12px var(--accent); transform:scale(1.05);}
.btn.small{font-size:12px;padding:6px 10px;}
input,textarea{width:100%;margin:6px 0;padding:6px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);background:transparent;color:inherit; transition:0.2s;}
input:focus, textarea:focus{border-color:var(--accent); box-shadow:0 0 6px var(--accent);}
.footer{text-align:center;color:var(--muted); font-size:12px; display:flex; justify-content:center; align-items:center; gap:10px; flex-direction:column;}
.admin-panel{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);display:none;align-items:center;justify-content:center;z-index:1000; animation:fadeIn 0.3s;}
.admin-content{background:var(--card); padding:20px; border-radius:12px; max-width:500px; width:90%; max-height:90%; overflow:auto; box-shadow:0 0 20px rgba(139,92,246,0.7);}
.admin-content h3{color:var(--accent); text-align:center; text-shadow:0 0 6px var(--accent);}
.admin-content label{display:block; margin-top:10px;}
.admin-content input, .admin-content textarea{width:100%;}
.close-btn{margin-top:10px;background:var(--accent); color:#fff; cursor:pointer; transition:0.3s;}
.close-btn:hover{box-shadow:0 0 12px var(--accent); transform:scale(1.05);}
@keyframes fadeInUp{0%{opacity:0; transform:translateY(20px);}100%{opacity:1; transform:translateY(0);}}
@keyframes fadeIn{from{opacity:0;} to{opacity:1;}}
@media(max-width:900px){.grid{grid-template-columns: repeat(auto-fit,minmax(140px,1fr)); gap:12px;}.panel{padding:12px;}}
#monkeySoundBtn{margin-top:10px; background:#ffeb3b; color:#000; font-weight:bold;}
</style>
</head>
<body>
<div class="particles" id="particles"></div>

<div class="app">
  <div class="header">
    <div>
      <div class="logo">üêµ MonkeyGames</div>
      <div class="subtitle">Quiz & Actualit√©s de la Jungle</div>
    </div>
    <button class="btn" id="adminBtn">Admin</button>
  </div>

  <div class="container">
    <div class="panel">
      <h2>üß† Quiz de la Jungle</h2>
      <div class="grid" id="quizList"></div>
    </div>

    <div class="panel">
      <h2>üì∞ Actualit√©s</h2>
      <div class="grid" id="newsList"></div>
    </div>
  </div>

  <div class="footer">
    ¬© 2025 MonkeyGames - Tous droits r√©serv√©s
    <button class="btn" id="monkeySoundBtn">üéµ Cri de singe</button>
  </div>
</div>

<div class="admin-panel" id="adminPanel">
  <div class="admin-content">
    <h3>Connexion Admin</h3>
    <input type="password" id="adminPass" placeholder="Mot de passe">
    <button class="btn" id="loginBtn">Se connecter</button>
    <div id="adminForms" style="display:none;">
      <h3>Ajouter un Quiz</h3>
      <label>Nom</label><input id="quizName">
      <label>Question</label><input id="quizQuestion">
      <label>R√©ponse 1</label><input id="r1">
      <label>R√©ponse 2</label><input id="r2">
      <label>R√©ponse 3</label><input id="r3">
      <label>Bonne r√©ponse</label><input id="good">
      <button class="btn" id="saveQuiz">Ajouter Quiz</button>
      <hr>
      <h3>Ajouter une Actualit√©</h3>
      <label>Titre</label><input id="newsTitle">
      <label>Contenu</label><textarea id="newsContent"></textarea>
      <button class="btn" id="saveNews">Ajouter Actualit√©</button>
    </div>
    <button class="btn close-btn" id="closeAdmin">Fermer</button>
  </div>
</div>

<!-- Sons -->
<audio id="clickSound" src="https://assets.codepen.io/605876/click-neon.mp3"></audio>
<audio id="suspenseSound" src="https://assets.codepen.io/605876/suspense-loop.mp3" loop autoplay></audio>
<audio id="monkeySound" src="https://assets.codepen.io/605876/monkey-cry.mp3"></audio>

<script>
const SHEET_URL = "https://sheetdb.io/api/v1/lmifyr403m3ox";
const ADMIN_PASS = "Marius2013.";

async function loadData(){
  const res = await fetch(SHEET_URL);
  const data = await res.json();
  const quizList=document.getElementById("quizList");
  const newsList=document.getElementById("newsList");
  quizList.innerHTML=""; newsList.innerHTML="";
  data.forEach((row,i)=>{
    if(row.type==="quiz"){
      const card=document.createElement("div");
      card.className="card";
      card.style.animationDelay=`${i*0.1}s`;
      card.innerHTML=`<h3>${row.nom}</h3><p>${row.question}</p>`;
      card.onclick=()=>flashCard(card,row);
      quizList.appendChild(card);
    }else if(row.type==="news"){
      const card=document.createElement("div");
      card.className="card";
      card.style.animationDelay=`${i*0.1}s`;
      card.innerHTML=`<h3>${row.titre}</h3><p>${row.contenu}</p>`;
      card.onclick=()=>flashCard(card,row);
      newsList.appendChild(card);
    }
  });
}

function flashCard(card,row){
  document.getElementById("clickSound").play();
  // effet flash et rotation al√©atoire de couleur
  card.classList.add("flash");
  card.style.borderColor = `hsl(${Math.random()*360},80%,60%)`;
  setTimeout(()=>{
    card.classList.remove("flash");
    card.style.borderColor = "rgba(139,92,246,0.2)";
  },300);
  editItem(row);
}

function editItem(item){
  const pass=prompt("Mot de passe admin requis :");
  if(pass!==ADMIN_PASS)return alert("Mot de passe incorrect !");
  const action=confirm("OK = Modifier, Annuler = Supprimer ?");
  if(action){
    const newValue=prompt("√âdite ton contenu :", item.question||item.contenu);
    if(newValue){
      let updated=item;
      if(item.type==="quiz") updated.question=newValue;
      else updated.contenu=newValue;
      fetch(`${SHEET_URL}/id/${item.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(updated)}).then(()=>loadData());
    }
  }else{
    if(confirm("Supprimer d√©finitivement ?")){
      fetch(`${SHEET_URL}/id/${item.id}`,{method:"DELETE"}).then(()=>loadData());
    }
  }
}

document.getElementById("adminBtn").onclick=()=>document.getElementById("adminPanel").style.display="flex";
document.getElementById("closeAdmin").onclick=()=>document.getElementById("adminPanel").style.display="none";
document.getElementById("loginBtn").onclick=()=>{
  const val=document.getElementById("adminPass").value;
  if(val===ADMIN_PASS) document.getElementById("adminForms").style.display="block";
  else alert("Mot de passe incorrect üü•");
};

document.getElementById("saveQuiz").onclick=()=>{
  const data={type:"quiz",nom:document.getElementById("quizName").value,question:document.getElementById("quizQuestion").value,r1:document.getElementById("r1").value,r2:document.getElementById("r2").value,r3:document.getElementById("r3").value,bonne:document.getElementById("good").value};
  fetch(SHEET_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then(()=>{alert("Quiz ajout√© ‚úÖ");loadData();});
};
document.getElementById("saveNews").onclick=()=>{
  const data={type:"news",titre:document.getElementById("newsTitle").value,contenu:document.getElementById("newsContent").value};
  fetch(SHEET_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then(()=>{alert("Actualit√© ajout√©e ‚úÖ");loadData();});
};
document.getElementById("monkeySoundBtn").onclick=()=>{document.getElementById("monkeySound").play();};

function createParticles(){
  for(let i=0;i<50;i++){
    const p=document.createElement("div");
    p.className="particle";
    p.style.left=Math.random()*100+"%";
    p.style.animationDuration=(3+Math.random()*5)+"s";
    p.style.width=(5+Math.random()*10)+"px";
    p.style.height=p.style.width;
    document.getElementById("particles").appendChild(p);
  }
}
createParticles();
loadData();
</script>
</body>
</html>
