<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Générateur de CV Moderne</title>
<style>
body {
  font-family: 'Poppins', sans-serif;
  background: #f4f4f8;
  margin: 0;
  padding: 0;
  color: #222;
}
.container { max-width: 1200px; margin: 30px auto; padding: 20px; }
h1 { text-align: center; margin-bottom: 20px; color: #007bff; }
.form-preview { display: flex; gap: 40px; flex-wrap: wrap; }
form { flex: 1; min-width: 300px; background: #fff; padding: 25px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
form h2 { margin-top: 20px; color: #007bff; font-size: 18px; border-bottom: 2px solid #007bff; padding-bottom: 5px; }
form input, form textarea { width: 100%; padding: 10px; margin-top: 8px; border-radius: 8px; border: 1px solid #ccc; resize: vertical; }
form textarea { min-height: 60px; }
button { margin-top: 20px; padding: 12px 20px; background: #007bff; color: #fff; border: none; border-radius: 10px; cursor: pointer; font-size: 16px; transition: 0.3s; }
button:hover { background: #0056b3; }
.cv-preview { flex: 1; min-width: 350px; background: #fff; padding: 25px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); max-height: 90vh; overflow-y: auto; }
.cv-preview h2 { font-size: 24px; margin-bottom: 5px; }
.cv-preview h3 { font-size: 20px; margin: 5px 0; color: #007bff; }
.cv-preview p { margin: 3px 0; line-height: 1.4; }
.cv-section { margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
.cv-preview .skills span { display: inline-block; background: #007bff; color: #fff; padding: 5px 10px; margin: 3px; border-radius: 12px; font-size: 14px; }
.cv-preview a { color: #007bff; text-decoration: none; }
.cv-preview a:hover { text-decoration: underline; }

/* Responsive mobile */
@media (max-width: 900px) {
  .form-preview { flex-direction: column; }
  form, .cv-preview { width: 100%; }
}

/* ===== Styles Modèles ===== */
.model-1 { background: #fff; color: #222; }
.model-2 { background: #fef7f0; color: #333; }
.model-2 h3 { color: #ff6600; }
.model-2 .skills span { background: #ff6600; }
.model-3 { background: #eef7ff; color: #222; }
.model-3 h3 { color: #0066cc; }
.model-3 .skills span { background: #0066cc; }

</style>
</head>
<body>

<div class="container">
<h1>Générateur de CV Moderne</h1>
<div class="form-preview">
<form id="cvForm">
<h2>Informations personnelles</h2>
<input type="text" id="name" placeholder="Nom complet">
<input type="text" id="job" placeholder="Poste souhaité">
<input type="email" id="email" placeholder="Email">
<input type="text" id="phone" placeholder="Téléphone">
<input type="text" id="location" placeholder="Ville / Pays">
<input type="url" id="linkedin" placeholder="LinkedIn">
<input type="url" id="github" placeholder="GitHub">
<input type="url" id="portfolio" placeholder="Portfolio / Site web">

<h2>Résumé</h2>
<textarea id="summary" placeholder="Résumé de carrière / phrase d'accroche"></textarea>

<h2>Expériences</h2>
<textarea id="experience" placeholder="Ex: Stage chez XYZ, missions, réalisations"></textarea>

<h2>Formation</h2>
<textarea id="education" placeholder="Diplômes, écoles, dates"></textarea>

<h2>Compétences</h2>
<textarea id="skills" placeholder="Séparer par des virgules: HTML, CSS, JS..."></textarea>

<h2>Projets / Portfolio</h2>
<textarea id="projects" placeholder="Ex: site web, design, vidéo..."></textarea>

<h2>Certifications / Badges</h2>
<textarea id="certifications" placeholder="Nom et lien éventuel"></textarea>

<h2>Choisir le modèle</h2>
<select id="modelSelect">
<option value="model-1">Modèle 1 - Classique</option>
<option value="model-2">Modèle 2 - Orange</option>
<option value="model-3">Modèle 3 - Bleu</option>
</select>

<button type="button" id="generateBtn">Générer le CV</button>
</form>

<div id="cvPreview" class="cv-preview model-1"></div>
<button id="downloadBtn" style="display:none;">Télécharger en PDF</button>

</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
const generateBtn = document.getElementById('generateBtn');
const downloadBtn = document.getElementById('downloadBtn');
const cvPreview = document.getElementById('cvPreview');
const modelSelect = document.getElementById('modelSelect');

generateBtn.addEventListener('click', () => {
  cvPreview.innerHTML = "";
  cvPreview.className = 'cv-preview ' + modelSelect.value; // appliquer le modèle

  const fields = [
    {id: 'name', label:'', htmlTag: 'h2'},
    {id: 'job', label:'', htmlTag: 'h3'},
    {id: 'location', label:'', htmlTag: 'p'},
    {id: 'email', label:'Email: ', htmlTag: 'p'},
    {id: 'phone', label:'Téléphone: ', htmlTag: 'p'},
    {id: 'linkedin', label:'LinkedIn: ', htmlTag: 'p', link:true},
    {id: 'github', label:'GitHub: ', htmlTag: 'p', link:true},
    {id: 'portfolio', label:'Portfolio: ', htmlTag: 'p', link:true},
    {id: 'summary', label:'Résumé', htmlTag: 'p'},
    {id: 'experience', label:'Expériences', htmlTag: 'p'},
    {id: 'education', label:'Formation', htmlTag: 'p'},
    {id: 'skills', label:'Compétences', htmlTag: 'p', skills:true},
    {id: 'projects', label:'Projets / Portfolio', htmlTag: 'p'},
    {id: 'certifications', label:'Certifications / Badges', htmlTag: 'p'}
  ];

  fields.forEach(field => {
    const value = document.getElementById(field.id).value.trim();
    if(value){
      const div = document.createElement('div');
      div.classList.add('cv-section');

      if(field.skills){
        const skillHTML = value.split(',').map(s=>`<span>${s.trim()}</span>`).join(' ');
        div.innerHTML = `<h3>${field.label}</h3><div class="skills">${skillHTML}</div>`;
      } else if(field.link){
        div.innerHTML = `<h3>${field.label}</h3><p><a href="${value}" target="_blank">${value}</a></p>`;
      } else if(field.label){
        div.innerHTML = `<h3>${field.label}</h3><${field.htmlTag}>${value}</${field.htmlTag}>`;
      } else {
        div.innerHTML = `<${field.htmlTag}>${value}</${field.htmlTag}>`;
      }

      cvPreview.appendChild(div);
    }
  });

  downloadBtn.style.display = cvPreview.innerHTML ? "inline-block" : "none";
});

downloadBtn.addEventListener('click', () => {
  html2pdf().from(cvPreview).set({margin:0.5, filename:`CV-${document.getElementById('name').value || 'MonCV'}.pdf`, html2canvas:{scale:2}}).save();
});
</script>
</body>
</html>
