<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Générateur de Citations</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #6e8efb, #a777e3);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
    }

    h1 {
      margin-bottom: 20px;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.4);
    }

    select, button {
      padding: 12px 20px;
      margin: 10px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
      transition: 0.3s;
    }

    select {
      background: #fff;
      color: #333;
    }

    button {
      background: #ff6f61;
      color: #fff;
    }

    button:hover {
      background: #ff3b2e;
      transform: scale(1.05);
    }

    .card {
      width: 400px;
      height: 250px;
      perspective: 1000px;
      margin-top: 20px;
    }

    .face {
      width: 100%;
      height: 100%;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.4);
      position: absolute;
      backface-visibility: hidden;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: 20px;
    }

    .face img {
      position: absolute;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
    }

    .face p, .face .theme {
      position: relative;
      z-index: 1;
      text-align: center;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.7);
    }

    .face p {
      font-size: 18px;
      margin-top: 10px;
    }

    .face .theme {
      font-weight: bold;
      font-size: 22px;
    }

    .watermark {
      position: absolute;
      bottom: 10px;
      right: 15px;
      font-size: 16px;
      opacity: 0.7;
      z-index: 2;
    }

    .inner-card {
      width: 100%;
      height: 100%;
      transition: transform 0.8s;
      transform-style: preserve-3d;
      position: relative;
    }

    .card.flipped .inner-card {
      transform: rotateY(180deg);
    }

    .front, .back {
      background: rgba(0,0,0,0.4);
    }

    .front { transform: rotateY(0deg); }
    .back { transform: rotateY(180deg); }
  </style>
</head>
<body>
  <h1>✨ Générateur de Citations ✨</h1>

  <select id="themeSelect">
    <option value="">-- Choisis un thème --</option>
    <option value="Amour">❤️ Amour</option>
    <option value="Amitié">🤝 Amitié</option>
    <option value="École">📚 École</option>
    <option value="Motivation">🔥 Motivation</option>
    <option value="Humour">😂 Humour</option>
    <option value="Vie">🌍 Vie</option>
    <option value="Famille">👨‍👩‍👧‍👦 Famille</option>
    <option value="Succès">🏆 Succès</option>
    <option value="Courage">🦁 Courage</option>
    <option value="Sagesse">🧠 Sagesse</option>
  </select>

  <div>
    <button onclick="generateQuote()">🎲 Générer</button>
    <button onclick="downloadQuote()">📥 Télécharger</button>
  </div>

  <div class="card" id="card">
    <div class="inner-card">
      <div class="face front">
        <img src="" alt="">
        <div class="theme"></div>
        <p></p>
        <div class="watermark">nth</div>
      </div>
      <div class="face back">
        <img src="" alt="">
        <div class="theme"></div>
        <p></p>
        <div class="watermark">nth</div>
      </div>
    </div>
  </div>

  <script>
    // Citations fixes par thème
    const citations={
      "Amour":["L'amour est la clé de la vie.","Aimer, c'est donner sans rien attendre.","Un cœur sincère vaut mieux que mille promesses."],
      "Amitié":["Un ami, c'est quelqu'un qui sait tout de toi et qui t'aime quand même.","Les amis sont la famille que l'on choisit.","L'amitié double les joies et réduit de moitié les peines."],
      "École":["Apprendre, c'est grandir.","Chaque erreur est une leçon déguisée.","La curiosité est le début de la sagesse."],
      "Motivation":["Ne rêve pas ta vie, vis tes rêves.","Le succès n’est pas final, l’échec n’est pas fatal.","Croire en soi est le premier secret du succès."],
      "Humour":["Je suis en forme… mais forme de quoi exactement ?","Rire, c’est bon pour la santé.","La vie est courte… alors souris tant que tu as encore des dents !"],
      "Vie":["Vis chaque jour comme si c'était le dernier.","Profite des petits moments.","Rien n'arrive sans raison."],
      "Famille":["La famille est tout.","Aime et protège les tiens.","Les liens familiaux sont précieux."],
      "Succès":["Travaille en silence, laisse ton succès parler.","Rien n’est impossible.","Le succès appartient à ceux qui osent."],
      "Courage":["Le courage, c’est de continuer malgré la peur.","Ose sortir de ta zone de confort.","Affronte tes peurs pour grandir."],
      "Sagesse":["Écoute plus que tu ne parles.","Apprends de chaque expérience.","La patience est la clé de la sagesse."]
    };

    // Générateur automatique
    const genererCitations={
      "Amour":{debuts:["L'amour","Être aimé","Tomber amoureux","Partager un sourire"],milieux:[" est comme une lumière"," est le plus beau cadeau"," illumine la vie"],fins:[" qui ne s'éteint jamais."," qu’on n’oublie jamais."," malgré la distance."]},
      "Amitié":{debuts:["Un ami","L’amitié","Un vrai compagnon"],milieux:[" est une étoile"," est un trésor"," brille dans l’ombre"],fins:[" qui éclaire nos nuits."," que rien ne peut briser."," sans fin."]},
      "École":{debuts:["Apprendre","Étudier","L’école"],milieux:[" ouvre des portes"," construit l’avenir"," est une richesse"],fins:[" que rien ne peut refermer."," pour demain."," pour toute une vie."]},
      "Motivation":{debuts:["Croire en soi","Persévérer","Ne jamais abandonner"],milieux:[" construit des victoires"," forge le caractère"," brise les limites"],fins:[" même quand tout est sombre."," malgré les échecs."," pour inspirer les autres."]},
      "Humour":{debuts:["Le rire","Un sourire","Une blague"],milieux:[" réchauffe le cœur"," rend la vie légère"," guérit les peines"],fins:[" mieux qu’un médicament."," qu’on n’oublie pas."," à partager sans modération."]},
      "Vie":{debuts:["La vie","Chaque instant","Un jour"],milieux:[" est un cadeau"," est une aventure"," est une leçon"],fins:[" à savourer pleinement."," qu’on écrit soi-même."," sans retour en arrière."]},
      "Famille":{debuts:["La famille","Un foyer","Un parent"],milieux:[" est une force"," unit les cœurs"," donne un refuge"],fins:[" malgré tout."," pour toujours."," à chaque étape de la vie."]},
      "Succès":{debuts:["Le succès","Réussir","Un rêve accompli"],milieux:[" demande des efforts"," ne vient pas seul"," se construit chaque jour"],fins:[" mais en vaut la peine."," après de longs combats."," qui inspire les autres."]},
      "Courage":{debuts:["Le courage","Oser","Se relever"],milieux:[" fait grandir"," ouvre des portes"," illumine le chemin"],fins:[" même dans l’obscurité."," chaque jour un peu plus."," sans jamais reculer."]},
      "Sagesse":{debuts:["La sagesse","Écouter","Apprendre"],milieux:[" vient du temps"," naît de l’expérience"," éclaire les choix"],fins:[" de toute une vie."," qu’on transmet."," sans jamais juger."]}
    };

    function creerCitation(theme){
      if(!genererCitations[theme]) return null;
      const data=genererCitations[theme];
      const d=data.debuts[Math.floor(Math.random()*data.debuts.length)];
      const m=data.milieux[Math.floor(Math.random()*data.milieux.length)];
      const f=data.fins[Math.floor(Math.random()*data.fins.length)];
      return d+m+f;
    }

    function typeText(element,text,speed=40){
      element.innerHTML="";
      let i=0;
      function typing(){
        if(i<text.length){
          element.innerHTML+=text.charAt(i);
          i++;
          setTimeout(typing,speed);
        }
      }
      typing();
    }

    function generateQuote(){
      const theme=document.getElementById("themeSelect").value;
      if(!theme || !citations[theme]) return alert("Sélectionne un thème !");
      let text;
      if(Math.random()>0.5){
        const list=citations[theme];
        text=list[Math.floor(Math.random()*list.length)];
      }else{
        text=creerCitation(theme) || "Citation inspirante 🌟";
      }
      const imgUrl=`https://picsum.photos/400/250?random=${Math.floor(Math.random()*1000)}`;
      const card=document.getElementById("card");
      const front=card.querySelector(".front");
      const back=card.querySelector(".back");
      if(!card.classList.contains("flipped")){
        back.querySelector("img").src=imgUrl;
        back.querySelector(".theme").textContent=theme;
        typeText(back.querySelector("p"),text);
      }else{
        front.querySelector("img").src=imgUrl;
        front.querySelector(".theme").textContent=theme;
        typeText(front.querySelector("p"),text);
      }
      card.classList.toggle("flipped");
    }

    function downloadQuote(){
      const card=document.getElementById("card");
      const visibleFace=card.classList.contains("flipped")
        ? card.querySelector(".back")
        : card.querySelector(".front");
      html2canvas(visibleFace,{scale:2}).then(canvas=>{
        const link=document.createElement("a");
        link.download="citation-nth.png";
        link.href=canvas.toDataURL("image/png");
        link.click();
      });
    }
  </script>
</body>
</html>
