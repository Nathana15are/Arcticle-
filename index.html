<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Générateur de Citations Aléatoires</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
body{margin:0;padding:20px;font-family:'Poppins',sans-serif;display:flex;flex-direction:column;align-items:center;
background: linear-gradient(270deg,#6e8efb,#a777e3,#f7971e,#ffd200);
background-size:800% 800%;animation:grad 25s ease infinite;color:#fff;transition: background 0.5s, color 0.5s;}
body.dark{background:linear-gradient(135deg,#232526,#414345);color:#fff;}
@keyframes grad{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
h1{text-align:center;font-size:2rem;margin-bottom:15px;text-shadow:0 6px 20px rgba(0,0,0,0.3);}
.controls{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-bottom:10px;}
select,input[type=file],button,input[type=color]{padding:10px 14px;border-radius:10px;border:0;font-weight:600;font-size:15px;cursor:pointer;}
select{background:#fff;color:#111;}
input[type=file]{background:rgba(255,255,255,0.12);color:#fff;}
button{background:linear-gradient(45deg,#ff6f61,#fbc531);color:#fff;box-shadow:0 8px 20px rgba(0,0,0,0.15);}
button:hover{transform:scale(1.03);}
.card-wrap{width:420px;max-width:94%;margin-bottom:12px;perspective:1200px;}
.card{width:100%;height:280px;border-radius:16px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.05);backdrop-filter:blur(10px);transition:transform 0.2s ease;}
.card.portrait{height:480px;}
.card img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:brightness(0.7);}
.card .text-container{position:relative;z-index:2;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:14px;}
.card .theme{font-weight:700;font-size:20px;margin-bottom:10px;color:#fff;text-shadow:0 3px 15px rgba(0,0,0,0.6);}
.card .quote{font-size:18px;line-height:1.35;color:#fff;text-shadow:0 4px 20px rgba(0,0,0,0.7);}
.card .watermark{position:absolute;bottom:10px;right:12px;font-weight:800;color:rgba(255,255,255,0.85);text-shadow:0 0 8px rgba(0,0,0,0.6);font-size:14px;}
@media(max-width:460px){.quote{font-size:16px}.card{height:240px}.card.portrait{height:400px}}
</style>
</head>
<body>
<h1>🎲 Générateur de Citations Aléatoires</h1>
<div class="controls">
<select id="themeSelect">
  <option value="">-- Choisis un thème --</option>
  <option value="Amour">❤️ Amour</option>
  <option value="Amitié">🤝 Amitié</option>
  <option value="Motivation">💪 Motivation</option>
  <option value="Humour">😂 Humour</option>
  <option value="Vie">🌍 Vie</option>
  <option value="Succès">🎯 Succès</option>
  <option value="Sagesse">📖 Sagesse</option>
  <option value="Rêves">✨ Rêves</option>
  <option value="École">📚 École</option>
  <option value="Sport">🏀 Sport</option>
  <option value="Musique">🎵 Musique</option>
  <option value="Voyage">✈️ Voyage</option>
  <option value="Technologie">💻 Technologie</option>
</select>
<select id="orientationSelect">
  <option value="landscape">🌄 Paysage</option>
  <option value="portrait">📱 Portrait</option>
</select>
<input id="fontSelect" type="color" title="Couleur du texte">
<input id="uploadImage" type="file" accept="image/*">
<button id="genBtn">🎲 Générer</button>
<button id="surpriseBtn">🎲 Surprise</button>
<button id="downloadBtn">📥 Télécharger</button>
<button id="toggleThemeBtn">🌙 Mode Clair/Sombre</button>
</div>

<div class="card-wrap">
<div class="card" id="card">
<img src="">
<div class="text-container">
<div class="theme"></div>
<div class="quote"></div>
</div>
<div class="watermark">nth</div>
</div>
</div>

<script>
const wordsByTheme={
"Amour":["cœur","passion","amour","sourire","étoile","rêve","ensemble","embrasser","joie","tendresse"],
"Amitié":["ami","rire","partager","secret","épauler","confiance","soutien","joie","souvenir","ensemble"],
"Motivation":["réussite","effort","courage","force","objectif","persévérance","progresser","défi","rêve","victoire"],
"Humour":["rire","blague","sourire","folie","drôle","marrant","gag","humour","amusant","situation"],
"Vie":["vie","chemin","moment","liberté","aventure","découverte","jour","expérience","instants","souvenir"],
"Succès":["succès","objectif","victoire","challenge","réussir","passion","ambition","détermination","progrès","triomphe"],
"Sagesse":["sagesse","connaissance","leçon","réflexion","expérience","vie","conseil","patience","réussite","esprit"],
"Rêves":["rêve","imagination","espérance","avenir","idée","voler","imaginer","fantaisie","possibilité","ciel"],
"École":["école","apprendre","prof","devoir","révision","réussite","classe","connaissance","livre","note"],
"Sport":["sport","énergie","victoire","équipe","entraîneur","challenge","buts","force","sprint","entrainement"],
"Musique":["musique","chant","instrument","rythme","battement","mélodie","son","harmonie","danse","voix"],
"Voyage":["voyage","aventure","découverte","destination","carte","plan","explorer","mer","montagne","route"],
"Technologie":["technologie","ordinateur","code","innovation","appareil","robot","réseau","IA","futur","connexion"]
};

let uploadedDataUrl=null;

function generateQuote(){
  let theme=document.getElementById('themeSelect').value;
  if(!theme) theme=Object.keys(wordsByTheme)[Math.floor(Math.random()*Object.keys(wordsByTheme).length)];
  const words=wordsByTheme[theme];
  const count=3+Math.floor(Math.random()*3); 
  let shuffled=words.sort(()=>0.5-Math.random());
  let quote=shuffled.slice(0,count).join(" ");
  const orientation=document.getElementById('orientationSelect').value;
  const card=document.getElementById('card');
  const imgUrl=uploadedDataUrl?uploadedDataUrl:`https://source.unsplash.com/${orientation==='portrait'?'500x800':'800x500'}/?${theme},nature&${Date.now()}`;
  card.querySelector('img').src=imgUrl;
  card.classList.toggle('portrait',orientation==='portrait');
  card.querySelector('.theme').textContent=theme;
  card.querySelector('.quote').textContent=quote;
}

document.getElementById('genBtn').addEventListener('click',generateQuote);

document.getElementById('surpriseBtn').addEventListener('click',()=>{
  const themes=Object.keys(wordsByTheme);
  const randomTheme=themes[Math.floor(Math.random()*themes.length)];
  document.getElementById('themeSelect').value=randomTheme;
  generateQuote();
});

document.getElementById('uploadImage').addEventListener('change',e=>{
  const f=e.target.files[0]; if(!f) return;
  const reader=new FileReader();
  reader.onload=ev=>{uploadedDataUrl=ev.target.result; document.getElementById('card').querySelector('img').src=uploadedDataUrl;};
  reader.readAsDataURL(f);
});

document.getElementById('downloadBtn').addEventListener('click',()=>{
  html2canvas(document.getElementById('card'),{scale:2,useCORS:true,allowTaint:true}).then(canvas=>{
    const link=document.createElement('a');
    link.download='citation-nth.png';
    link.href=canvas.toDataURL('image/png');
    link.click();
  });
});

document.getElementById('toggleThemeBtn').addEventListener('click',()=>document.body.classList.toggle('dark'));

const cardEl=document.getElementById('card');
cardEl.addEventListener('mousemove',e=>{
  const rect=cardEl.getBoundingClientRect();
  const x=(e.clientX-rect.left)/(rect.width)-0.5;
  const y=(e.clientY-rect.top)/(rect.height)-0.5;
  cardEl.style.transform=`rotateY(${x*20}deg) rotateX(${-y*20}deg)`;
});
cardEl.addEventListener('mouseleave',()=>{cardEl.style.transform='rotateY(0deg) rotateX(0deg)';});
</script>
</body>
</html>
