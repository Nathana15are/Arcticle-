<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>🐒 MonkeyGames - Jungle Royale</title>
<style>
:root{
  --bg:#081a10;--accent:#8b5cf6;--muted:#c0c0b0;
  font-family:'Segoe UI',Roboto,sans-serif;
}
*{margin:0;padding:0;box-sizing:border-box;}
html, body{
  width:100%; height:100%; overflow:hidden;
  background:linear-gradient(160deg,#0a1e0f,#123018);
}
body{
  display:flex; flex-direction:column; align-items:center; justify-content:center;
}
.header{
  position:absolute;top:10px;left:0;width:100%;
  display:flex;justify-content:space-between;align-items:center;
  padding:0 20px;z-index:10;
}
.logo{font-size:24px;font-weight:bold;color:var(--accent);}
.btn{
  background:rgba(255,255,255,0.08);border:1px solid var(--accent);
  padding:8px 12px;border-radius:8px;color:#fff;cursor:pointer;
  transition:0.3s;
}
.btn:hover{background:var(--accent);}
.swipe-container{
  display:flex;transition:transform 0.6s ease;
  height:100%; width:300vw; will-change:transform;
}
.page{
  width:100vw;height:100%;flex-shrink:0;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  padding:20px;text-align:center;
}
.page h2{color:var(--accent);margin-bottom:10px;}
.card{background:rgba(255,255,255,0.08);padding:12px 16px;margin:10px;border-radius:10px;max-width:300px;}
.footer{
  position:absolute;bottom:70px;width:100%;
  text-align:center;font-size:12px;color:var(--muted);
}
.navbar{
  position:absolute;bottom:10px;left:0;width:100%;
  display:flex;justify-content:space-around;align-items:center;
  background:rgba(0,0,0,0.5);backdrop-filter:blur(8px);
  border-top:1px solid rgba(255,255,255,0.1);
  padding:8px 0;
}
.navbar button{
  background:none;border:none;color:#fff;font-size:22px;cursor:pointer;
  transition:0.3s;
}
.navbar button.active{color:var(--accent);transform:scale(1.2);}
#gamePanel{
  display:none;position:fixed;top:0;left:0;width:100%;height:100%;
  background:linear-gradient(180deg,#123018,#0a1e0f);
  flex-direction:column;align-items:center;justify-content:center;z-index:2000;
}
#gameCanvas{
  border:2px solid var(--accent);
  border-radius:10px; background:transparent;
}
#score,#bestScoreGame{color:#fff;font-weight:bold;margin:8px;text-shadow:0 0 6px var(--accent);}
</style>
</head>
<body>

<div class="header">
  <div class="logo">🐒 MonkeyGames</div>
  <button class="btn" id="adminBtn">Admin</button>
</div>

<div class="swipe-container" id="swipeContainer">
  <div class="page" id="page1">
    <h2>🧠 Quiz Jungle</h2>
    <div class="card">Teste ton instinct sauvage !</div>
  </div>

  <div class="page" id="page2">
    <h2>📰 Actualités</h2>
    <div class="card">Un nouveau roi des bananes a été couronné 👑🍌</div>
  </div>

  <div class="page" id="page3">
    <h2>🔥 La Jungle Royale</h2>
    <p>Attrape les 🍌, évite les 🐍 et bats ton record !</p>
    <button class="btn" id="playGameBtn">🎮 Jouer</button>
    <div id="bestScore">🏆 Meilleur score : 0</div>
  </div>
</div>

<div class="navbar">
  <button id="navQuiz">🧠</button>
  <button id="navNews">📰</button>
  <button id="navGame">🎮</button>
</div>

<div id="gamePanel">
  <canvas id="gameCanvas" width="400" height="400"></canvas>
  <div id="score">Score : 0</div>
  <div id="bestScoreGame">🏆 Meilleur : 0</div>
  <button class="btn" id="closeGameBtn">❌ Quitter</button>
</div>

<audio id="monkeySound" src="https://assets.codepen.io/605876/monkey-cry.mp3" preload="auto"></audio>
<audio id="bananaSound" src="https://cdn.pixabay.com/download/audio/2023/03/22/audio_c0f6b43738.mp3?filename=pop.mp3" preload="auto"></audio>

<script>
// Plein écran automatique
function goFullScreen() {
  if(document.documentElement.requestFullscreen){
    document.documentElement.requestFullscreen();
  } else if(document.documentElement.webkitRequestFullscreen){
    document.documentElement.webkitRequestFullscreen();
  }
}
window.onload=()=>{goFullScreen();};

// Swipe navigation
let currentPage=0;
const swipeContainer=document.getElementById('swipeContainer');
const navBtns=[navQuiz,navNews,navGame];
function updateSwipe(){
  swipeContainer.style.transform=`translateX(-${currentPage*100}vw)`;
  navBtns.forEach((b,i)=>b.classList.toggle('active',i===currentPage));
}
navQuiz.onclick=()=>{currentPage=0;updateSwipe();}
navNews.onclick=()=>{currentPage=1;updateSwipe();}
navGame.onclick=()=>{currentPage=2;updateSwipe();}

let startX=0,endX=0;
document.body.addEventListener('touchstart',e=>{startX=e.touches[0].clientX;});
document.body.addEventListener('touchend',e=>{
  endX=e.changedTouches[0].clientX;
  if(startX-endX>50&&currentPage<2){currentPage++;updateSwipe();}
  else if(endX-startX>50&&currentPage>0){currentPage--;updateSwipe();}
});

// Jungle Royale amélioré
let gameInterval,player,bananas,serpents,score=0,best=localStorage.getItem("bestScore")||0;
document.getElementById("bestScore").textContent="🏆 Meilleur score : "+best;
document.getElementById("playGameBtn").onclick=()=>{
  document.getElementById("gamePanel").style.display="flex";
  startGame();
};
document.getElementById("closeGameBtn").onclick=()=>{
  document.getElementById("gamePanel").style.display="none";
  stopGame();
};

function startGame(){
  const c=document.getElementById("gameCanvas");
  const ctx=c.getContext("2d");
  score=0;
  player={x:200,y:200,vx:0,vy:0,img:new Image()};
  player.img.src="https://i.imgur.com/ntYyP2C.png";
  bananas=[];serpents=[];
  const bananaImg=new Image(); bananaImg.src="https://i.imgur.com/ZQ6t9kU.png";
  const snakeImg=new Image(); snakeImg.src="https://i.imgur.com/6cRzVYs.png";
  document.getElementById("bestScoreGame").textContent="🏆 Meilleur : "+best;
  
  // Particules feuilles
  const leaves=[];
  for(let i=0;i<30;i++){leaves.push({x:Math.random()*400,y:Math.random()*400,vx:Math.random()*0.5-0.25,vy:Math.random()*1+0.2});}

  function spawn(){
    if(Math.random()<0.03)bananas.push({x:Math.random()*380,y:Math.random()*380});
    if(Math.random()<0.02)serpents.push({x:Math.random()*380,y:Math.random()*380});
  }
  function move(e){
    if(e.key==="ArrowUp")player.vy=-4;
    if(e.key==="ArrowDown")player.vy=4;
    if(e.key==="ArrowLeft")player.vx=-4;
    if(e.key==="ArrowRight")player.vx=4;
  }
  document.addEventListener("keydown",move);
  function update(){
    ctx.clearRect(0,0,400,400);
    spawn();
    // fond dynamique feuilles
    ctx.fillStyle="rgba(0,255,0,0.15)";
    leaves.forEach(l=>{
      l.x+=l.vx; l.y+=l.vy;
      if(l.y>400) l.y=0; if(l.x>400) l.x=0;
      ctx.fillRect(l.x,l.y,2,2);
    });

    // player
    player.x+=player.vx; player.y+=player.vy;
    player.vx*=0.9; player.vy*=0.9;
    player.x=Math.max(0,Math.min(380,player.x));
    player.y=Math.max(0,Math.min(380,player.y));

    // bananes
    bananas.forEach((b,i)=>{
      ctx.drawImage(bananaImg,b.x,b.y,20,20);
      if(Math.abs(b.x-player.x)<20 && Math.abs(b.y-player.y)<20){
        bananas.splice(i,1); score+=10;
        document.getElementById("bananaSound").play();
      }
    });
    // serpents
    serpents.forEach((s,i)=>{
      ctx.drawImage(snakeImg,s.x,s.y,30,30);
      if(Math.abs(s.x-player.x)<25 && Math.abs(s.y-player.y)<25){
        document.getElementById("monkeySound").play();
        alert("🐍 Tu t'es fait mordre ! Score final : "+score);
        stopGame();
      }
    });
    ctx.drawImage(player.img,player.x,player.y,25,25);
    document.getElementById("score").textContent="Score : "+score;
  }
  gameInterval=setInterval(update,60);
}
function stopGame(){
  clearInterval(gameInterval);
  if(score>best){
    best=score;
    localStorage.setItem("bestScore",best);
  }
  document.getElementById("bestScore").textContent="🏆 Meilleur score : "+best;
}
</script>
</body>
</html>
