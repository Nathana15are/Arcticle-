<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>üì∞ Mon Journal</title>
<style>
* { box-sizing:border-box; margin:0; padding:0; }
body{font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:linear-gradient(135deg,#f5f7fa,#c3cfe2); color:#333; line-height:1.6; transition: background 0.3s;}
header{position:sticky; top:0; background:rgba(255,255,255,0.8); backdrop-filter:blur(10px); display:flex; flex-direction:column; align-items:center; padding:20px; box-shadow:0 4px 20px rgba(0,0,0,0.1);}
header h1{font-size:2em; margin-bottom:10px; color:#222;}
header .controls{display:flex; gap:10px; flex-wrap:wrap; justify-content:center;}
select, button{padding:8px 12px; border:none; border-radius:8px; cursor:pointer; font-size:1em; transition:0.3s;}
select{background:rgba(255,255,255,0.7);}
button{background:#222; color:#fff;}
button:hover{background:#444; transform:scale(1.05);}
#visitorCounter{margin-top:10px; font-size:1em; color:#222;}
#articles{display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:20px; padding:20px;}
.article{background:rgba(255,255,255,0.6); backdrop-filter:blur(10px); border-radius:15px; overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,0.1); transition:transform 0.3s, box-shadow 0.3s;}
.article:hover{transform:translateY(-8px); box-shadow:0 15px 40px rgba(0,0,0,0.25);}
.article img{width:100%; height:180px; object-fit:cover; transition:transform 0.3s;}
.article:hover img{transform:scale(1.05);}
.article .text{padding:15px; transition:transform 0.3s;}
.article:hover .text{transform:translateY(-5px);}
.article h2{margin-bottom:10px; font-size:1.3em; color:#111;}
.article p{margin-bottom:10px; font-size:0.95em;}
.article small{color:#555; font-size:0.85em;}
.theme-badge{display:inline-block; background:#ff6b6b; color:#fff; padding:3px 8px; border-radius:12px; font-size:0.75em; margin-bottom:5px; text-transform:uppercase; transition: transform 0.3s, box-shadow 0.3s;}
.theme-badge:hover{transform:scale(1.2); box-shadow:0 5px 15px rgba(0,0,0,0.3);}
footer{text-align:center; padding:15px; background:rgba(255,255,255,0.8); backdrop-filter:blur(10px); color:#444; margin-top:20px;}
#adminPanel{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); backdrop-filter:blur(5px); display:flex; justify-content:center; align-items:center; z-index:1000;}
#adminContent{background:#fff; padding:30px; border-radius:15px; width:90%; max-width:500px; max-height:90%; overflow-y:auto; box-shadow:0 10px 40px rgba(0,0,0,0.2);}
#adminContent h2{margin-bottom:15px; color:#222; text-align:center;}
#adminContent input, #adminContent textarea, #adminContent select, #adminContent button{width:100%; margin:10px 0; padding:10px; border-radius:8px; border:1px solid #ccc; transition:0.3s;}
#adminContent button{background:#222;color:#fff;}
#adminContent button:hover{background:#444; transform:scale(1.05);}
.articleItem{border:1px solid #ccc;padding:10px;margin-bottom:10px;border-radius:10px;background:white; display:flex; flex-direction:column; gap:5px; transition: transform 0.3s;}
.articleItem:hover{transform:scale(1.02);}
.articleItem img{width:100%; height:150px; object-fit:cover; border-radius:6px;}
.closeAdmin{background:red; margin-bottom:10px; transition:transform 0.3s;}
.closeAdmin:hover{transform:scale(1.05);}
@media(max-width:600px){
  header h1{font-size:1.6em;}
  .article img{height:150px;}
  #articles{grid-template-columns:1fr;}
  .theme-badge{font-size:0.65em; padding:2px 6px;}
  header .controls{flex-direction:column;}
}
</style>
</head>
<body>

<header>
<h1>üì∞ Mon Journal</h1>
<div class="controls">
<select id="sort"><option value="date">üìÖ Trier par date</option><option value="popularity">‚≠ê Trier par popularit√©</option></select>
<select id="filterTheme"><option value="all">Tous les th√®mes</option></select>
<button onclick="toggleAdmin()">Page Admin</button>
</div>
<div id="visitorCounter">Visites totales : 0</div>
</header>

<main id="articles"></main>
<footer>‚ú® Propuls√© par SheetDB ‚ú®</footer>

<div id="adminPanel">
<div id="adminContent">
<button class="closeAdmin" onclick="toggleAdmin()">Fermer X</button>
<h2>Connexion Admin</h2>
<div id="loginForm">
<input type="password" id="password" placeholder="Mot de passe">
<button onclick="checkPassword()">Se connecter</button>
</div>
<div id="adminPanelContent" style="display:none;">
<h2>Ajouter / Modifier Article</h2>
<input type="text" id="title" placeholder="Titre">
<textarea id="content" placeholder="Contenu"></textarea>
<input type="text" id="image" placeholder="URL image (optionnel)">
<input type="number" id="popularity" placeholder="Popularit√©">
<input type="date" id="date">
<input type="text" id="theme" placeholder="Th√®me">
<button onclick="addArticle()">Ajouter Article</button>
<h2>Articles existants</h2>
<div id="articlesList"></div>
</div>
</div>
</div>

<script>
const API_URL="https://sheetdb.io/api/v1/ki97uz4ffxzca";
const ADMIN_PASS="Marius2013.";

// VISITOR COUNTER
const counterNamespace="mon_journal_site_123";
const counterKey="visites";
async function updateVisitorCounter(){
  const res = await fetch(`https://api.countapi.xyz/hit/${counterNamespace}/${counterKey}`);
  const data = await res.json();
  document.getElementById("visitorCounter").textContent="Visites totales : "+data.value;
}
if(!localStorage.getItem("localVisits")) localStorage.setItem("localVisits",0);
localStorage.setItem("localVisits", parseInt(localStorage.getItem("localVisits"))+1);
updateVisitorCounter();

// ARTICLES INT√âGR√âS (100 articles r√©alistes)
let localArticles = [
{title:"Bienvenue sur le journal !", content:"Voici notre premier article pour tester le site. Vous pouvez trier et filtrer les articles par th√®me et popularit√©.", image:"", popularity:10, date:"2025-09-18", theme:"Actualit√©"},
{title:"Conseils pour r√©ussir ses contr√¥les", content:"Apprenez √† mieux organiser votre temps et vos r√©visions gr√¢ce √† ces astuces simples et efficaces.", image:"", popularity:45, date:"2025-09-17", theme:"√âducation"},
{title:"Top 5 jeux vid√©o du moment", content:"D√©couvrez les jeux les plus populaires aupr√®s des coll√©giens cette semaine.", image:"", popularity:78, date:"2025-09-16", theme:"Fun"},
{title:"Interview d‚Äôun √©l√®ve inspirant", content:"Rencontrez Thomas, un √©l√®ve qui a r√©ussi √† cr√©er son mini-projet de robotique au coll√®ge.", image:"", popularity:65, date:"2025-09-15", theme:"Actualit√©"},
{title:"Mini exp√©riences scientifiques √† la maison", content:"D√©couvrez 3 exp√©riences faciles √† r√©aliser avec des objets du quotidien.", image:"", popularity:32, date:"2025-09-14", theme:"√âducation"},
{title:"DIY : D√©core ta chambre facilement", content:"Apprends √† personnaliser ta chambre avec des id√©es simples et peu co√ªteuses.", image:"", popularity:50, date:"2025-09-13", theme:"Lifestyle"},
{title:"Nouvelles applications utiles pour coll√©giens", content:"D√©couvrez des applications qui aident √† mieux organiser ses devoirs et apprendre de nouvelles choses.", image:"", popularity:40, date:"2025-09-12", theme:"Tech"},
{title:"Top livres √† lire cette ann√©e", content:"Une s√©lection de livres captivants pour les jeunes, faciles √† lire et pleins d‚Äôaventures.", image:"", popularity:35, date:"2025-09-11", theme:"Culture"},
{title:"Blagues pour √©gayer la journ√©e", content:"Voici une compilation de blagues amusantes et faciles √† comprendre pour rigoler avec tes amis.", image:"", popularity:60, date:"2025-09-10", theme:"Fun"},
{title:"Comment r√©ussir son expos√© oral", content:"Des astuces pour pr√©parer et pr√©senter un expos√© de mani√®re efficace.", image:"", popularity:55, date:"2025-09-09", theme:"√âducation"},
{title:"Les tendances mode coll√©giens", content:"D√©couvre les nouvelles tendances vestimentaires de cette saison pour √™tre styl√© au coll√®ge.", image:"", popularity:42, date:"2025-09-08", theme:"Lifestyle"},
{title:"Applications pour apprendre l‚Äôanglais", content:"5 applications pour am√©liorer ton anglais facilement et de mani√®re ludique.", image:"", popularity:38, date:"2025-09-07", theme:"√âducation"},
{title:"D√©couverte scientifique : les volcans", content:"Apprends comment se forment les volcans et quelles sont leurs caract√©ristiques principales.", image:"", popularity:48, date:"2025-09-06", theme:"√âducation"},
{title:"Nouveaux films √† regarder", content:"Voici une s√©lection de films r√©cents adapt√©s aux coll√©giens pour passer un bon moment.", image:"", popularity:56, date:"2025-09-05", theme:"Culture"},
{title:"Comment g√©rer son stress au coll√®ge", content:"Des conseils simples pour rester calme et concentr√© m√™me pendant les contr√¥les.", image:"", popularity:50, date:"2025-09-04", theme:"√âducation"},
{title:"Top s√©ries anim√©es", content:"D√©couvre les s√©ries anim√©es les plus populaires du moment.", image:"", popularity:62, date:"2025-09-03", theme:"Fun"},
{title:"Tech : nouveaut√©s gadgets", content:"Les derniers gadgets high-tech pour les jeunes passionn√©s de technologie.", image:"", popularity:44, date:"2025-09-02", theme:"Tech"},
{title:"√âv√®nements culturels pr√®s de chez toi", content:"Participe √† des expositions et √©v√©nements culturels int√©ressants pour les jeunes.", image:"", popularity:39, date:"2025-09-01", theme:"Culture"},
{title:"Astuces pour bien dormir", content:"D√©couvrez comment am√©liorer la qualit√© de votre sommeil pour √™tre plus concentr√© le lendemain.", image:"", popularity:46, date:"2025-08-31", theme:"Lifestyle"},
{title:"Les bases du codage pour coll√©giens", content:"Apprends les bases du codage avec des exercices simples et amusants.", image:"", popularity:41, date:"2025-08-30", theme:"Tech"},
{title:"Comment pr√©parer un expos√© scientifique", content:"Apprends √† structurer ton expos√© et √† le pr√©senter avec confiance.", image:"", popularity:53, date:"2025-08-29", theme:"√âducation"},
{title:"Sorties nature √† ne pas manquer", content:"D√©couvre les meilleurs endroits pour observer la faune et la flore pr√®s de chez toi.", image:"", popularity:36, date:"2025-08-28", theme:"Lifestyle"},
{title:"Jeux de soci√©t√© pour s‚Äôamuser entre amis", content:"Une s√©lection de jeux amusants et faciles √† comprendre pour jouer avec tes amis.", image:"", popularity:57, date:"2025-08-27", theme:"Fun"},
{title:"Les secrets de l‚Äôespace", content:"D√©couvre les plan√®tes, les √©toiles et les ph√©nom√®nes fascinants de notre univers.", image:"", popularity:47, date:"2025-08-26", theme:"√âducation"},
{title:"Top applications pour apprendre le fran√ßais", content:"Ces applications vont t‚Äôaider √† am√©liorer ton fran√ßais de mani√®re ludique.", image:"", popularity:33, date:"2025-08-25", theme:"√âducation"},
{title:"Interview : jeune inventeur en herbe", content:"D√©couvrez le parcours d‚Äôun coll√©gien passionn√© de robotique et de sciences.", image:"", popularity:60, date:"2025-08-24", theme:"Actualit√©"},
{title:"Comment organiser son bureau de travail", content:"Des astuces simples pour avoir un bureau propre et organis√© pour mieux travailler.", image:"", popularity:49, date:"2025-08-23", theme:"Lifestyle"},
{title:"Top 10 chansons populaires chez les coll√©giens", content:"D√©couvre les chansons que tous tes amis √©coutent en ce moment.", image:"", popularity:55, date:"2025-08-22", theme:"Fun"},
{title:"Cr√©er un mini site web facilement", content:"Apprends √† cr√©er un site web simple avec HTML, CSS et JavaScript.", image:"", popularity:42, date:"2025-08-21", theme:"Tech"},
{title:"D√©couverte : animaux √©tonnants", content:"Apprends √† conna√Ætre des animaux rares et fascinants du monde entier.", image:"", popularity:38, date:"2025-08-20", theme:"Culture"},
{title:"Conseils pour rester motiv√©", content:"Des astuces pour rester motiv√© dans tes √©tudes et tes projets personnels.", image:"", popularity:51, date:"2025-08-19", theme:"√âducation"},
{title:"DIY : Fabrique tes propres d√©corations", content:"Amuse-toi √† cr√©er des d√©corations originales avec peu de mat√©riel.", image:"", popularity:46, date:"2025-08-18", theme:"Lifestyle"},
{title:"Les meilleurs jeux mobiles gratuits", content:"D√©couvre les jeux gratuits les plus populaires sur smartphone pour t‚Äôamuser.", image:"", popularity:59, date:"2025-08-17", theme:"Fun"},
{title:"D√©couverte scientifique : volcans et tremblements", content:"Comprends le fonctionnement des volcans et des s√©ismes avec des exemples simples.", image:"", popularity:44, date:"2025-08-16", theme:"√âducation"},
{title:"Top films d‚Äôanimation r√©cents", content:"Une s√©lection des films d‚Äôanimation √† ne pas manquer cette ann√©e.", image:"", popularity:50, date:"2025-08-15", theme:"Culture"},
{title:"Tech : comment utiliser un Raspberry Pi", content:"Apprends √† utiliser un Raspberry Pi pour tes projets technologiques.", image:"", popularity:41, date:"2025-08-14", theme:"Tech"},
{title:"Top astuces pour apprendre rapidement", content:"Des m√©thodes simples et efficaces pour m√©moriser plus vite.", image:"", popularity:48, date:"2025-08-13", theme:"√âducation"},
{title:"Jeux √† faire en famille", content:"D√©couvrez des jeux simples et amusants √† faire avec vos proches.", image:"", popularity:54, date:"2025-08-12", theme:"Fun"},
{title:"D√©core ton agenda scolaire", content:"Apprends √† personnaliser ton agenda pour qu‚Äôil soit joli et pratique.", image:"", popularity:36, date:"2025-08-11", theme:"Lifestyle"},
{title:"Les bases de la programmation JavaScript", content:"D√©couvre comment √©crire tes premiers scripts en JavaScript facilement.", image:"", popularity:43, date:"2025-08-10", theme:"Tech"},
{title:"Histoires courtes √† lire", content:"Des histoires captivantes pour se d√©tendre et voyager avec l‚Äôimagination.", image:"", popularity:37, date:"2025-08-09", theme:"Culture"},
{title:"Comment bien r√©viser les maths", content:"Des astuces pour comprendre et m√©moriser plus facilement les notions de maths.", image:"", popularity:52, date:"2025-08-08", theme:"√âducation"},
{title:"DIY : Fabrique des cartes d‚Äôanniversaire", content:"Des id√©es cr√©atives pour r√©aliser tes cartes de v≈ìux toi-m√™me.", image:"", popularity:45, date:"2025-08-07", theme:"Lifestyle"},
{title:"Top 5 jeux PC gratuits", content:"D√©couvre les jeux PC gratuits les plus jou√©s par les jeunes cette ann√©e.", image:"", popularity:58, date:"2025-08-06", theme:"Fun"},
{title:"D√©couverte scientifique : le corps humain", content:"Apprends le fonctionnement de ton corps et ses m√©canismes fascinants.", image:"", popularity:49, date:"2025-08-05", theme:"√âducation"},
{title:"Films historiques √† regarder", content:"Une s√©lection de films historiques adapt√©s aux coll√©giens.", image:"", popularity:41, date:"2025-08-04", theme:"Culture"},
{title:"Cr√©er son premier jeu vid√©o simple", content:"Apprends √† cr√©er un petit jeu vid√©o avec des outils gratuits pour d√©butants.", image:"", popularity:47, date:"2025-08-03", theme:"Tech"},
{title:"Comment rester concentr√© en classe", content:"Des conseils pour mieux √©couter et retenir ce qui est enseign√©.", image:"", popularity:53, date:"2025-08-02", theme:"√âducation"},
{title:"Activit√©s √† faire dehors", content:"
];

// ADMIN PANEL
function toggleAdmin(){document.getElementById("adminPanel").style.display = document.getElementById("adminPanel").style.display==="flex"?"none":"flex";}
function checkPassword(){
  if(document.getElementById("password").value===ADMIN_PASS){
    document.getElementById("loginForm").style.display="none";
    document.getElementById("adminPanelContent").style.display="block";
    displayArticles(localArticles);
    populateThemes();
  } else alert("Mot de passe incorrect");
}

// AFFICHAGE ARTICLES
function displayArticles(articles){
  const container=document.getElementById("articles");
  container.innerHTML="";
  const filter=document.getElementById("filterTheme").value;
  let filtered = articles;
  if(filter!=="all") filtered = articles.filter(a=>a.theme.toLowerCase()===filter.toLowerCase());
  const sort=document.getElementById("sort").value;
  if(sort==="popularity") filtered.sort((a,b)=>b.popularity-a.popularity);
  else filtered.sort((a,b)=>new Date(b.date)-new Date(a.date));
  filtered.forEach(a=>{
    const div=document.createElement("div");
    div.className="article";
    let imgHtml = a.image ? `<img src="${a.image}" alt="">` : "";
    div.innerHTML=`${imgHtml}<div class="text"><span class="theme-badge">${a.theme}</span><h2>${a.title}</h2><p>${a.content}</p><small>‚≠ê ${a.popularity} | üìÖ ${a.date}</small></div>`;
    container.appendChild(div);
  });

  // Liste admin
  const adminContainer=document.getElementById("articlesList");
  if(adminContainer){
    adminContainer.innerHTML="";
    articles.forEach((a,i)=>{
      const div=document.createElement("div");
      div.className="articleItem";
      let imgHtml = a.image ? `<img src="${a.image}" alt="">` : "";
      div.innerHTML=`${imgHtml}<strong>${a.title}</strong> | üè∑Ô∏è ${a.theme} | ‚≠ê ${a.popularity} | üìÖ ${a.date} <button onclick="deleteArticle(${i})">Supprimer</button>`;
      adminContainer.appendChild(div);
    });
  }
}

// ADMIN ACTIONS
function addArticle(){
  const title=document.getElementById("title").value;
  const content=document.getElementById("content").value;
  const image=document.getElementById("image").value;
  const popularity=document.getElementById("popularity").value;
  const date=document.getElementById("date").value;
  const theme=document.getElementById("theme").value;
  const newArticle={title,content,image,popularity:parseInt(popularity),date,theme};
  localArticles.push(newArticle);

  // Envoi √† SheetDB
  fetch(API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:newArticle})});

  displayArticles(localArticles);
  populateThemes();
}

function deleteArticle(index){
  const articleId = localArticles[index].id;
  if(articleId) fetch(`${API_URL}/id/${articleId}`,{method:"DELETE"});
  localArticles.splice(index,1);
  displayArticles(localArticles);
  populateThemes();
}

// POPULER LES TH√àMES
function populateThemes(){
  const themeSelect=document.getElementById("filterTheme");
  const themes=[...new Set(localArticles.map(a=>a.theme))];
  themeSelect.innerHTML=`<option value="all">Tous les th√®mes</option>` + themes.map(t=>`<option value="${t}">${t}</option>`).join("");
}

document.getElementById("sort").addEventListener("change",()=>displayArticles(localArticles));
document.getElementById("filterTheme").addEventListener("change",()=>displayArticles(localArticles));
displayArticles(localArticles);
populateThemes();
</script>
</body>
</html>
