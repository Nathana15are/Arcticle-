<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GÃ©nÃ©rateur de Citations</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
body{
  margin:0;padding:20px;font-family:'Poppins',sans-serif;
  display:flex;flex-direction:column;align-items:center;
  background: linear-gradient(270deg,#6e8efb,#a777e3,#f7971e,#ffd200);
  background-size:800% 800%;animation:grad 20s ease infinite;color:#fff;
}
@keyframes grad{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
h1{text-align:center;font-size:2rem;margin-bottom:15px;text-shadow:0 6px 20px rgba(0,0,0,0.3);}
.controls{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-bottom:10px;}
select,input[type=file],button{padding:10px 14px;border-radius:10px;border:0;font-weight:600;font-size:15px;cursor:pointer;}
select{background:#fff;color:#111;}
input[type=file]{background:rgba(255,255,255,0.12);color:#fff;}
button{background:linear-gradient(45deg,#ff6f61,#fbc531);color:#fff;box-shadow:0 8px 20px rgba(0,0,0,0.15);}
button:hover{transform:scale(1.03);}
.card-wrap{width:420px;max-width:94%;perspective:1200px;margin-bottom:12px;}
.card{width:100%;height:270px;position:relative;border-radius:16px;transform-style:preserve-3d;transition:transform .8s;overflow:visible;}
.card.flipped{transform:rotateY(180deg);}
.face{position:absolute;inset:0;border-radius:16px;overflow:hidden;backface-visibility:hidden;display:flex;align-items:center;justify-content:center;padding:20px;box-shadow:0 18px 40px rgba(0,0,0,0.35);background:linear-gradient(135deg, rgba(0,0,0,0.25), rgba(0,0,0,0.35));}
.face img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:blur(2px) brightness(0.75);z-index:1;}
.text-container{position:relative;z-index:2;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:14px;}
.theme{font-weight:700;font-size:20px;margin-bottom:10px;opacity:0;animation:fadeIn .9s forwards;transition:color .35s;}
.quote{font-size:18px;line-height:1.35;color:#fff;text-shadow:0 6px 20px rgba(0,0,0,0.45);}
.watermark{position:absolute;bottom:10px;right:12px;z-index:3;font-weight:800;color:rgba(255,255,255,0.85);text-shadow:0 0 8px rgba(0,0,0,0.6);font-size:14px;}
#history{margin-top:14px;max-height:160px;overflow:auto;width:92%;background:rgba(255,255,255,0.08);border-radius:10px;padding:10px;color:#fff;}
#history p{margin:6px 0;font-size:14px;opacity:.95;}
@keyframes fadeIn{to{opacity:1}}
@media(max-width:460px){.quote{font-size:16px}.face{padding:12px}.card{height:230px}}
</style>
</head>
<body>
<h1>âœ¨ GÃ©nÃ©rateur de Citations</h1>

<div class="controls">
<select id="themeSelect">
  <option value="">-- Choisis un thÃ¨me --</option>
  <option value="Amour">â¤ï¸ Amour</option>
  <option value="AmitiÃ©">ğŸ¤ AmitiÃ©</option>
  <option value="Motivation">ğŸ’ª Motivation</option>
  <option value="Humour">ğŸ˜‚ Humour</option>
  <option value="Vie">ğŸŒ Vie quotidienne</option>
  <option value="SuccÃ¨s">ğŸ¯ RÃ©ussite</option>
  <option value="Sagesse">ğŸ“– Sagesse</option>
  <option value="RÃªves">âœ¨ RÃªves</option>
  <option value="Ã‰cole">ğŸ“š CollÃ¨ge / Ã‰tudes</option>
  <option value="AlÃ©atoire">ğŸ¤¯ Citations alÃ©atoires</option>
</select>

<input id="uploadImage" type="file" accept="image/*">
<button id="genBtn">ğŸ² GÃ©nÃ©rer</button>
<button id="surpriseBtn">ğŸ² Surprise</button>
<button id="downloadBtn">ğŸ“¥ TÃ©lÃ©charger</button>
</div>

<div class="card-wrap">
<div class="card" id="card">
<div class="face front">
<img crossOrigin="anonymous" src="">
<div class="text-container">
<div class="theme"></div>
<div class="quote"></div>
</div>
<div class="watermark">nth</div>
</div>
<div class="face back" style="transform:rotateY(180deg)">
<img crossOrigin="anonymous" src="">
<div class="text-container">
<div class="theme"></div>
<div class="quote"></div>
</div>
<div class="watermark">nth</div>
</div>
</div>
</div>

<div id="history"></div>

<script>
const citations={
"Amour":["L'amour rend la vie plus belle.","Tomber amoureux illumine l'existence.","Un cÅ“ur sincÃ¨re vaut mieux que mille promesses.","Chaque geste d'amour compte.","L'amour transforme tout.","Aimer quelqu'un, c'est accepter ses dÃ©fauts.","Un sourire partagÃ© est un acte d'amour.","L'amour vÃ©ritable ne meurt jamais.","Chaque jour est une chance d'aimer.","L'amour est la lumiÃ¨re de la vie."],
"AmitiÃ©":["Un ami vÃ©ritable est un trÃ©sor.","Les amis sont la famille que l'on choisit.","L'amitiÃ© double les joies et rÃ©duit les peines.","Partager des moments crÃ©e des souvenirs.","Les vrais amis restent malgrÃ© la distance.","Un bon ami Ã©coute sans juger.","L'amitiÃ© se nourrit de confiance.","Avoir un ami, c'est avoir un refuge.","L'amitiÃ© rend la vie plus douce.","Un ami est lÃ  mÃªme dans le silence."],
"Motivation":["Ne rÃªve pas ta vie, vis tes rÃªves.","Croire en soi est le premier secret du succÃ¨s.","PersÃ©vÃ©rer transforme les obstacles en opportunitÃ©s.","Se relever aprÃ¨s un Ã©chec forge le caractÃ¨re.","Chaque effort compte vers ton objectif.","Avancer malgrÃ© la peur est un vrai courage.","Rien nâ€™est impossible Ã  celui qui ose.","Travaille en silence, laisse ton succÃ¨s parler.","Le courage d'aujourd'hui crÃ©e le succÃ¨s de demain.","Le succÃ¨s nâ€™est pas final, lâ€™Ã©chec nâ€™est pas fatal."],
"Humour":["Rire est le meilleur des remÃ¨des.","Un sourire peut illuminer une journÃ©e.","L'humour rapproche les gens.","Rire de soi-mÃªme est un signe de sagesse.","Une blague partagÃ©e rend heureux.","Rire libÃ¨re l'esprit et le cÅ“ur.","Les sourires sont contagieux.","L'humour est l'Ã©pice de la vie.","Un fou rire est une petite victoire.","L'humour transforme les moments difficiles."],
"Vie":["Vis chaque jour comme si c'Ã©tait le dernier.","Profite des petits moments.","Rien n'arrive sans raison.","La vie est un voyage, pas une destination.","Chaque instant compte.","Les expÃ©riences forgent notre chemin.","La vie est belle quand on la savoure.","Apprends Ã  apprÃ©cier le prÃ©sent.","Vivre pleinement est un art.","Chaque jour offre une nouvelle chance."],
"SuccÃ¨s":["Le succÃ¨s appartient Ã  ceux qui osent.","Travaille dur et reste humble.","Les efforts d'aujourd'hui portent les fruits de demain.","Atteindre ses buts demande courage et patience.","Chaque victoire commence par un premier pas.","La rÃ©ussite sourit Ã  ceux qui n'abandonnent jamais.","Croire en soi est la clÃ© du succÃ¨s.","Le succÃ¨s inspire ceux qui viennent aprÃ¨s.","Le succÃ¨s est une question de constance.","Rien nâ€™est impossible pour qui persÃ©vÃ¨re."],
"Sagesse":["Ã‰couter avant de parler est un signe de sagesse.","La patience est une vertu prÃ©cieuse.","La sagesse se cultive avec le temps.","Apprendre de chaque expÃ©rience rend sage.","Agir avec discernement est la clÃ©.","Comprendre les autres enrichit l'esprit.","Les erreurs d'hier forgent la sagesse de demain.","Savoir attendre est un art.","La connaissance combinÃ©e Ã  l'expÃ©rience mÃ¨ne Ã  la sagesse.","La rÃ©flexion prÃ©cÃ¨de les bonnes dÃ©cisions."],
"RÃªves":["N'abandonne jamais tes rÃªves.","RÃªver grand ouvre des portes.","Chaque rÃªve mÃ©rite qu'on se batte pour lui.","Les rÃªves sont la lumiÃ¨re de l'esprit.","Ose rÃªver, ose agir.","Les rÃªves transforment la rÃ©alitÃ©.","Croire en ses rÃªves rend fort.","RÃªver permet de grandir.","Les rÃªves sont le carburant de la vie.","Un rÃªve partagÃ© devient plus fort."],
"Ã‰cole":["Apprendre, c'est grandir chaque jour.","Chaque erreur est une leÃ§on dÃ©guisÃ©e.","La curiositÃ© est le dÃ©but de la sagesse.","Ã‰tudier ouvre des portes vers l'avenir.","L'Ã©cole construit le chemin de demain.","Apprendre enrichit l'esprit et le cÅ“ur.","Chaque connaissance acquise est un trÃ©sor.","L'Ã©ducation est un cadeau prÃ©cieux.","Les leÃ§ons d'aujourd'hui sont les succÃ¨s de demain.","Apprendre rend libre et confiant."],
"AlÃ©atoire":["La vie est pleine de surprises.","Chaque jour est une nouvelle aventure.","Fais ce que tu aimes et aime ce que tu fais.","Un sourire peut changer une journÃ©e.","Rien nâ€™est permanent sauf le changement.","Sois toi-mÃªme, tous les autres sont dÃ©jÃ  pris.","La simplicitÃ© est la clÃ© du bonheur.","Chaque instant est prÃ©cieux.","Apprends Ã  te connaÃ®tre toi-mÃªme.","CrÃ©e ta propre lÃ©gende."]
};

const card=document.getElementById('card');
const frontFace=card.querySelector('.face.front');
const backFace=card.querySelector('.face.back');
const genBtn=document.getElementById('genBtn');
const surpriseBtn=document.getElementById('surpriseBtn');
const downloadBtn=document.getElementById('downloadBtn');
const themeSelect=document.getElementById('themeSelect');
const uploadEl=document.getElementById('uploadImage');
const historyEl=document.getElementById('history');

let uploadedDataUrl=null;
uploadEl.addEventListener('change',e=>{
  const f=e.target.files[0];if(!f)return;
  const reader=new FileReader();
  reader.onload=ev=>{uploadedDataUrl=ev.target.result;backFace.querySelector('img').src=uploadedDataUrl;};
  reader.readAsDataURL(f);
});

function rand(arr){return arr[Math.floor(Math.random()*arr.length)];}

function typeText(el,text,speed=28){el.innerHTML="";let i=0;function step(){if(i<text.length){el.innerHTML+=text.charAt(i);i++;setTimeout(step,speed);}}step();}

function addHistory(text){const p=document.createElement('p');p.textContent=text;historyEl.prepend(p);while(historyEl.children.length>60)historyEl.removeChild(historyEl.lastChild);}

function unsplashUrlFor(theme){const keywords={Amour:"couple,romantic,heart,flowers",AmitiÃ©:"friends,laugh,smile",Motivation:"sunrise,goal,climb",Humour:"funny,smile,comedy",Vie:"landscape,nature,life",SuccÃ¨s:"trophy,achievement,cityscape",Sagesse:"books,library,calm",RÃªves:"stars,moon,dream",Ã‰cole:"school,books,study",AlÃ©atoire:"random,abstract"};const kw=keywords[theme]||"landscape,nature";return`https://source.unsplash.com/800x500/?${encodeURIComponent(kw)}&${Date.now()}`;}

function generateQuote(){
  let theme=themeSelect.value;if(!theme){alert("SÃ©lectionne un thÃ¨me.");return;}
  if(theme==="AlÃ©atoire"){const keys=Object.keys(citations);theme=keys[Math.floor(Math.random()*keys.length)];}
  const arr=citations[theme]||["Citation inspirante âœ¨"];
  const text=rand(arr);

  const colors=["#ff6f61","#6fe3ff","#ffeb6f","#7fff6f","#e36fff"];
  const titleColor=colors[Math.floor(Math.random()*colors.length)];

  const useUploaded=!!uploadedDataUrl;
  const imgUrl=useUploaded?uploadedDataUrl:unsplashUrlFor(theme);

  const willFlipToBack=!card.classList.contains('flipped');
  const targetFace=willFlipToBack?backFace:frontFace;
  const imgEl=targetFace.querySelector('img');
  if(!useUploaded){imgEl.crossOrigin="anonymous";imgEl.src=imgUrl;}else{imgEl.removeAttribute('crossOrigin');imgEl.src=uploadedDataUrl;}

  targetFace.querySelector('.theme').textContent=theme;
  targetFace.querySelector('.theme').style.color=titleColor;
  typeText(targetFace.querySelector('.quote'),text,24);

  card.classList.toggle('flipped');
  addHistory(`${theme} â€” ${text}`);
}

function generateRandomQuote(){themeSelect.value="AlÃ©atoire";generateQuote();}

function downloadQuote(){
  const visibleFace=card.classList.contains('flipped')?backFace:frontFace;
  const prevTrans=visibleFace.style.transition;visibleFace.style.transition='none';
  setTimeout(()=>{
    html2canvas(visibleFace,{scale:2,useCORS:true,allowTaint:false}).then(canvas=>{
      const link=document.createElement('a');link.download='citation-nth.png';link.href=canvas.toDataURL('image/png');link.click();
      visibleFace.style.transition=prevTrans||'';
    }).catch(err=>{console.error(err);alert("Impossible de gÃ©nÃ©rer l'image.");visibleFace.style.transition=prevTrans||'';});
  },150);
}

genBtn.addEventListener('click',generateQuote);
surpriseBtn.addEventListener('click',generateRandomQuote);
downloadBtn.addEventListener('click',downloadQuote);

(function applyAutoTheme(){const hr=new Date().getHours();if(hr>=19||hr<6){document.body.style.background="linear-gradient(135deg,#232526,#414345)";}})();
</script>
</body>
</html>
